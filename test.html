<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
		<title>Juliana Hong</title>

</head>

<script type="text/javascript">

function extractEmailAddresses(emailAddressString) {
    emailAddressString.replace(/\s/g, "");
    var emailArray = emailAddressString.split(',');
    var sendEmail = ""

    for (var i = 0; i < emailArray.length; i++){

        //FIX STUFF HERE- fix scope sendEmail
        sendEmail += "{\'email\': \'" + emailArray[i] + "\'," + "\'type\': \'to\' }";
        //if last value in email array
        console.log('first' + sendEmail);
        if (i == emailArray.length - 1){
       console.log('if' + sendEmail);	
        }
        else {
        	sendEmail += ",";
        console.log('else' + sendEmail);
        }
        }
        
        return sendEmail;
}


function determineEmailRecipients(emailAddressString) {
	//if emailAddress contains comma i.e. multiple recipients	
    if (emailAddressString.indexOf(',') >= 0){
    	console.log("Must extract");

    	return extractEmailAddresses(emailAddressString);
    }
    else {
    	return emailAddressString;
    }
}

var emailAddress = "julianajoy@gmail.com,  julianahhong@gmail.com,test@gmail.com";
// console.log(determineEmailRecipients(emailAddress));
console.log(determineEmailRecipients("juliana@email.com, julia@2"));

</script>

</body>
</html>
